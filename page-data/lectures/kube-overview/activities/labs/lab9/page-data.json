{"componentChunkName":"component---src-pages-lectures-kube-overview-activities-labs-lab-9-index-mdx","path":"/lectures/kube-overview/activities/labs/lab9/","result":{"pageContext":{"frontmatter":{"title":"Kubernetes Lab 9 - Network Policies"},"relativePagePath":"/lectures/kube-overview/activities/labs/lab9/index.mdx","titleType":"page","MdxNode":{"id":"4a0d3d7b-dc46-5534-b385-c39d121b3967","children":[],"parent":"0589391f-0fa4-5ed3-88c6-a805b08da7b5","internal":{"content":"---\ntitle: Kubernetes Lab 9 - Network Policies\n---\n\n## Problem\n\nSetup minikube\n\n```\nminikube start --network-plugin=cni\nkubectl apply -f https://docs.projectcalico.org/v3.9/manifests/calico.yaml\nkubectl -n kube-system set env daemonset/calico-node FELIX_IGNORELOOSERPF=true\nkubectl -n kube-system get pods | grep calico-node\n```\n\nCreate secured pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-secure-pod\n  labels:\n    app: secure-app\nspec:\n  containers:\n  - name: nginx\n    image: bitnami/nginx\n    ports:\n    - containerPort: 8080\n```\n\nCreate client pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-client-pod\nspec:\n  containers:\n  - name: busybox\n    image: radial/busyboxplus:curl\n    command: [\"/bin/sh\", \"-c\", \"while true; do sleep 3600; done\"]\n```\n\nCreate a policy to allow only client pods with label `allow-access: \"true\"` to access secure pod\n ","type":"Mdx","contentDigest":"89a0f67cbc335a8b76c6a1125d0dbd1d","owner":"gatsby-plugin-mdx","counter":613},"frontmatter":{"title":"Kubernetes Lab 9 - Network Policies"},"exports":{},"rawBody":"---\ntitle: Kubernetes Lab 9 - Network Policies\n---\n\n## Problem\n\nSetup minikube\n\n```\nminikube start --network-plugin=cni\nkubectl apply -f https://docs.projectcalico.org/v3.9/manifests/calico.yaml\nkubectl -n kube-system set env daemonset/calico-node FELIX_IGNORELOOSERPF=true\nkubectl -n kube-system get pods | grep calico-node\n```\n\nCreate secured pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-secure-pod\n  labels:\n    app: secure-app\nspec:\n  containers:\n  - name: nginx\n    image: bitnami/nginx\n    ports:\n    - containerPort: 8080\n```\n\nCreate client pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-client-pod\nspec:\n  containers:\n  - name: busybox\n    image: radial/busyboxplus:curl\n    command: [\"/bin/sh\", \"-c\", \"while true; do sleep 3600; done\"]\n```\n\nCreate a policy to allow only client pods with label `allow-access: \"true\"` to access secure pod\n ","fileAbsolutePath":"/home/runner/work/learning-cloudnative-101/learning-cloudnative-101/src/pages/lectures/kube-overview/activities/labs/lab9/index.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3037994772","3037994772","530240012","530240012","768070550"]}